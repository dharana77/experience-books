현대카드


https://careerhyundai.recruiter.co.kr/app/applicant/registResume?jobnoticeSn=196806&systemKindCode=MRS2



두려워 하지 말라



운을 만드는 것
https://www.youtube.com/shorts/TYnZEuXDn-4


올림픽 공원,


소마미술관


몽촌토성


오히려 해야겠다는 마음을 비우고

그냥 하는 것


내가 할 수 있는 것에 집중하자


홈수끼



5.3.6 ~ 5.6
https://discord.com/channels/1197892142635433995/1197892143906312217




5장

스프링 클라우드  컨피그 서버로 구성. 관리


5.1 구성(그리고 복잡성) 관리

5.2 스프링 클라우드 컨피그 서버 구축

5.3 스프링 클라우드 컨피그와 스프링 부트 클라이언트 통합

5.4 중요한 구성 정보 보호

5.5 마치며

5.6 요약


핵심 내용
서비스 코드에서 구성 정보 분리

스프링 클라우드 컨피그 서버 구성

스프링 부트 마이크로서비스와 구성 서버 통합

중요한 프로퍼티 암호화

스프링 클라우드 컨피그 서버와 하시코프 볼트 통합


——


5.1 구성 및 복잡성 관리

소프트웨어 개발자는 애플리케이션 구성 정보와 코드를 분리하는 것이 중요하다는 말을 항상 들음

구성정보의 중요성

그러나 수백개의 마이크로 서비스가 많은 인스턴스를 실행하고 있다면

이를 대응하기 위해

다음과 같은 사항들을 고려한다

배포되는 실제 코드와 구성 정보를 완전히 분리
여러 환경에서도 절대 변경되지 않는 불변 애플리케이션 이미지를 빌드
서버가 시작할때 마이크로 서비스가 읽어 오는 환경 변수 또는 중앙 저장소를 통해 모든 애플리케이션 구성 정보를 주입





스프링 클라우드 컨피그 서버




5.2 스프링 클라우드 컨피그 서버 구축

스프링 부트로 만든 REST 기반의 어플리케이션

제일 좋은 방법은 분리하는 것

config server 와

spring boot actuator 추가


스프링 부트 버전

스프링 클라우드 버전


부트스트랩 파일
스프링 애플리케이션 이름
스프링 클라우드 구성 서버 위치
암호화/복호화 정보 등을 지정

부모 격인 스프링 applicationContext로 로드되고

이 부모 컴포넌트는 application.properties나 application.yml
파일을 사용하는 컴포넌트 보다 먼저 로드됨


스프링이 서비스에 대해 시작할 동작의 종류를 시작 서비스에 지정하는 스프링 애너테이션들

스프링 클라우드 컨피그 서버의 부트스트랩 클래스를 보여줌


@SpringBootApplication
@EnableConfigServer



bootstram.yaml

spring:
	application:
		name: config-server
	profiles:
		active: native

	cloud:
		config:
			server:
			# 로컬 구성 정보: classpath 위치나 파일 시스템 위치가 될 수 있음
				native:
				#특정 파일 시스템 폴더에서 읽어옴
					search-location: file:///(FILE_PATH)

server:
	port: 8071



어플리케이션 구성 정볼르 저장하고자 파일 시스템을
사용하므로 스프링 클라우드 컨피그 서버가 native 프로파일로
실행되도록 지정해야 한다.

스프링 프로파일은 스프링 프레임워크가 제공하는 핵심기능임을 기억하자.
(dev, test, stagin, production, native)

native는 클라우드 컨피그 서버용으로만 생성한 프로파일이며
구성 파일을 클래스 패스나 파일 시스템에서 검색하고 읽도록
지시하는 프로파일임을 기억하자.


5.2.3. 서비스의 구성 파일 설정

서비스를 로컬에서 실행할 때의 default, dev, production 환경

스프링 클라우드 컨피그는 모든 것이 계층 구조로 동작한다.
애플리케이션 구성 정보는 애플리케이션 이름과 환경별로 구성할 프로퍼티를 표시

라이선싱 서비스에서 직접 사용될 예제용 프로퍼티
스프링 액추에이터 구성
데이터베이스 구성


애플리케이션 구성 파일의 명명 규약은 appname-env.properties
또는 appname-env.yml 파일이다.

라이선싱 마이크로서비스를 시작할 때 실행하려는 환경은 서비스를 구동하면
명령줄에서 전달하는 스프링 부트 프로파일로 지정된다.

프로파일이 명령줄로 전달되지 않으면 기본적으로
애플리케이션과 패키지된 application.properties에 포함된 구성데이터를 사용한다.


스프링 클라우드 컨피그 서버
(마이크로 서비스로 실행되고 노출됨)

/licensing-service/default
/licensing-servie/dev
/licesning-serive/prod

licensing-service.properties
licensing-servie-dev.properties
licesning-service-prod.properties


중대형 클라우드 애플리케이션에는 파일 시스템 기반 솔루션을
권장하지 않는다.
파일 시스템 방식을 사용하려면 애플리케이션의 구성 데이터에
액세스하려는 모든 구성 서버를 위한 공유 파일 마운트 지점을 구현해야 한다.
클라우드에서 공유 파일 시스템 서버를 설정하는 것은 가능하지만
이 환경을 유지할 책임은 여러분에게 있따.

여기에서는 파일 시스템 방식을 스프링 클라우드 구성 서버에 입문하는
가장 쉬운 예제로 보여주고 있지만, 이후에는 애플리케이션 구성데이터를
저장하는 데 깃허브 및 하시코프 볼트를 사용하여 컨피그 서버를
구성하는 방법을 보여줄 것이다.


http://localhost:8071/licesning-service/default를 입력하면
Licensing-service.properties 파일에 포함된 모든 속성과 함께 반환된 JSON으로 표시된다.

{
	“name”: “licesning-service”,
	“profiles”: [
		 “default””
	],
	“label”: null,
	“version”: null,
	“state”: null,
	“propertySources”: [ # 이프로퍼티를 포함한 소스 파일은 config 저장소에 있음
		{

			“name”: “classpath:/config/licesning-service.properteis”,
			 “source”: {
				“example.property”:  “I AM THE DEFAULT”,
				“spring.jpa.hibernate.ddl-auto”: “none”,
				 …..
			}
		}
	]
}


5.3 스프링 클라우드 컨피그와 스프링 부트 클라이언트 통합
라이선싱 서비스 구축

왜 postgreSQL인가
postgreSQL (포스트그레 SQL)은 엔터프라이즈 시스템으로 간주되며
가장 흥미롭고 진보된 오픈 소스 관계형 데이터베이스 관리 시스템 중 하나로 알려져 있다.
다른 관계형 데이터베이스보다 많은 장점이 있는데
첫번째 장점은 누구나 사용 가능하고 완전 무료인 하나의 라이선스를 제공한다는 것
두번째 장점은 가능성과 기능 면에서 쿼리의 복잡성을 증가시키지 않고 더 많은 양의 데이터로 작업할 수 있다는 것

postgres는 데이터베이스 상태의 이미지를 각 트랜젝션에 추가하는 다중 버전 동시성 제어를 사용하여 더 나은 성능과 일관된 트랜젝션을 생성
postgres는 트랜젝션을 실행할 때 읽기 잠금(reading books)를 사용하지 않음
postgres에는 서버가 복구 또는 대기 모드에 있는 동안 클라이언트가 서버에서 검색할 수 있는 핫 스탠바이라는 기능이 있음
	-	즉 데이터베이스를 완전히 잠그지 않고 유지 관리를 수행



차단 없이 테이블에서 동일한 정보를 전달하는 동안 많은 클라이언트에 서비스를 제공할 수 있다.
뷰(view)를 지원하므로 사용자는 데이터가 저장된 방식과 다르게 쿼리 할 수 있음
객체 관계형 데이터베이스로 데이터를 객체처럼 다룰 수 있게 하며 객체지향 메커니즘을 제공
JSON을 데이터 타입으로 저장하고 쿼리할 수 있다.


다중 버전 동시성 제어 MVCC
트랜젝션 스냅샷
데이터 버전 관리
읽기와 쓰기
가비지 컬렉션

뷰 (View)
가상 테이블 : 뷰가 물리적인 데이터를 저장하지 않고 select 쿼리를 기반으로 동적으로 생성, 따라서 읽는 방법을 정의하지만 데이터를 수정하지는 않음
단순화:  복잡한 쿼리를 단순화하여 사용자나 애플리케이션이 쉽게 접근할 수 있게 함 - 예를 들어 여러 테이블에서 조인을 수행한 결과를 뷰로 만들면 사용자는 복잡한 쿼리를 기억하지 않고도 쉽게 사용할 수 있습니다.
보안: 뷰를 사용하면 특정 데이터에 대한 접근을 제한할 수 있음 사용자는 뷰를 통해 필요한 데이터만 볼 수 있고 기본 테이블의 모든 데이터를 노출하지 않게 됩니다.
데이터 추상화: 뷰는 실제 테이블의 구조나 내용에 대한 변경이 있을때 이를 사용하는


스프링 데이터를 사용해 데이터베이스와 통신하고 라이선싱 테이블의 데이터를 POJO에 매핑한다.

POJO란 무엇인지와 예시


데이터베이스 접속 정보와 간단한
5.3.1 라이선싱


